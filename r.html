<!DOCTYPE html>
<html lang="fa">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, maximum-scale=1.0, minimum-scale=1.0">
<title>RunnerEmoji</title>
<style>
  html, body {
    margin: 0;
    padding: 0;
    overflow: hidden; 
    background: #87CEEB;
    touch-action: none; 
  }
  canvas {
    display: block;
    margin: 0 auto;
    background: #87CEEB;
  }
  #overlay {
    position: absolute;
    top: 10px;
    left: 10px;
    color: white;
    font-size: max(16px, 3vw); 
    font-family: sans-serif;
    z-index: 10;
  }
  #restartBtn {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    padding: 20px 40px;
    font-size: 5vw;
    background: #ff5555;
    color: white;
    border: none;
    border-radius: 10px;
    display: none;
    z-index: 20;
  }
  
  /* --- Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ÛŒ Ø´Ù†Ø§ÙˆØ± Ù¾Ø§ÛŒÛŒÙ† Ú†Ù¾ --- */
  .fixed-btn {
    position: absolute;
    bottom: 50px;
    background: rgba(255, 255, 255, 0.2);
    color: #008CBA; 
    border: 2px solid #fff;
    border-radius: 30px;
    padding: 8px 14px;
    cursor: pointer;
    font-size: 1rem; /* Ú©ÙˆÚ†Ú©â€ŒØªØ± Ø´Ø¯ */
    backdrop-filter: blur(5px);
    transition: 0.3s;
    z-index: 1000;
  }
  .fixed-btn:hover {
    background: rgba(255, 255, 255, 0.4);
    transform: scale(1.05);
  }
  #homeBtn { left: 50px; }
  #helpBtn { left: 150px; }

  /* --- Ø¯Ú©Ù…Ù‡ ØµØ¯Ø§ Ø¨Ø§Ù„Ø§ Ø±Ø§Ø³Øª --- */
  #soundBtn {
    position: absolute;
    top: 10px;
    right: 10px;
    z-index: 1000;
    padding: 10px 15px;
    font-size: 18px;
    cursor: pointer;
    border: none;
    border-radius: 8px;
    background: rgba(255,255,255,0.3);
    backdrop-filter: blur(5px);
    transition: 0.3s;
  }
  #soundBtn:hover { background: rgba(255,255,255,0.6); }

  /* --- Ù…ÙˆØ¯Ø§Ù„ Help --- */
  .help-modal {
    display: none;
    position: fixed;
    z-index: 2000;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0,0,0,0.6);
    justify-content: center;
    align-items: center;
  }
  .help-content {
    background: #fff;
    color: #ff5722;
    padding: 30px;
    border-radius: 15px;
    width: 90%;
    max-width: 500px;
    text-align: center;
    box-shadow: 0 0 25px rgba(0,0,0,0.3);
    animation: fadeIn 0.3s ease-in-out;
  }
  .help-content h2 { color: #0079a1; margin-bottom: 10px; }
  .close-help {
    background: #0079a1;
    color: #fff;
    border: none;
    border-radius: 20px;
    padding: 10px 20px;
    font-size: 1rem;
    margin-top: 15px;
    cursor: pointer;
    transition: 0.3s;
  }
  .close-help:hover { background: #009fc4; }
  @keyframes fadeIn { from {opacity:0; transform: scale(0.9);} to {opacity:1; transform: scale(1);} }
</style>
</head>
<body>
<div id="overlay">â¤ï¸â¤ï¸â¤ï¸ &nbsp; â­ 0 &nbsp; â° 0</div>
<button id="restartBtn">Restart</button>
<canvas id="gameCanvas"></canvas>

<button id="soundBtn">ğŸ”Š sound</button>
<button id="homeBtn" class="fixed-btn">ğŸ  Home</button> 
<button id="helpBtn" class="fixed-btn">â“ Help</button>

<div id="helpModal" class="help-modal">
  <div class="help-content">
    <h2>ğŸ¯ How to Play</h2>
    <p style="font-size:1.2rem; color:#333;">
      Jump over enemies to avoid collision and collect stars.
    </p>
    <button id="closeHelp" class="close-help">Close âœ–ï¸</button>
  </div>
</div>

<audio id="bgMusic" loop src="music.mp3"></audio>
<audio id="hitSound" src="lose.mp3"></audio>
<audio id="starSound" src="win.mp3"></audio>
<audio id="heartSound" src="win.mp3"></audio>
<audio id="gameOverSound" src="gameover.mp3"></audio>
<audio id="gameStartSound" src="win.mp3"></audio>

<script>
const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');
let width, height;

function resizeCanvas(){
    width = window.innerWidth;
    height = window.innerHeight;
    canvas.width = width;
    canvas.height = height;
}
resizeCanvas();
window.addEventListener('resize', resizeCanvas);

const playerEmoji = 'ğŸ’ƒ';
const enemyEmojis = ['ğŸ‘¿','ğŸ’€','â˜ ï¸','ğŸ’©','ğŸ¤¡','ğŸ‘¹','ğŸ‘º','ğŸ‘»','ğŸ‘½','ğŸ‘¾','ğŸ¤–'];
const starEmoji = 'â­';
const heartEmoji = 'â¤ï¸';
const skyObjects = ['â˜ï¸','âœˆï¸','ğŸš€','ğŸ›¸','ğŸ›°ï¸','ğŸš'];

let gravity=0.5, jumpForce=20;
const ENEMY_BASE_SPEED=4.0, MAX_SPEED_MULTIPLIER=1.4, SPEED_RAMP_DURATION=90000, BG_SCROLL_SPEED=0.5;
const TREE_COUNT=8, SKY_ITEM_SPAWN_CHANCE=0.008, STAR_SPAWN_CHANCE=0.0005, HEART_SPAWN_CHANCE=0.0001;

let player={x:0, y:0, w:0, h:0, vy:0, onGround:false, lives:3};
let enemies=[], stars=[], hearts=[], skyItems=[];
let backgroundObjects=[], score=0, time=0, gameOver=false, lastEnemyTime=0;

function initPlayer(){
    player.w = height*0.08;
    player.h = height*0.08;
    player.x = width*0.1;
    player.y = height*0.75 - player.h;
}
initPlayer();

function jump(){ if(player.onGround){ player.vy=-jumpForce; player.onGround=false; }}

canvas.addEventListener('touchstart', (e)=>{e.preventDefault(); jump();});
document.addEventListener('keydown', (e)=>{ if(e.code==='Space') jump(); });

// ØµØ¯Ø§Ù‡Ø§
const bgMusic = document.getElementById('bgMusic');
const hitSound = document.getElementById('hitSound');
const starSound = document.getElementById('starSound');
const heartSound = document.getElementById('heartSound');
const gameOverSound = document.getElementById('gameOverSound');
const gameStartSound = document.getElementById('gameStartSound');

// Ø¯Ú©Ù…Ù‡ ØµØ¯Ø§
const soundBtn = document.getElementById('soundBtn');
let soundOn = true;

soundBtn.addEventListener('click', () => {
    soundOn = !soundOn;
    if(soundOn){
        bgMusic.play().catch(()=>{});
        soundBtn.textContent = 'ğŸ”Š Sound';
    } else {
        bgMusic.pause();
        soundBtn.textContent = 'ğŸ”‡ Mute';
    }
});

function playBgMusic(){ if(soundOn) bgMusic.play().catch(()=>{}); }
function playSound(audio){ if(soundOn){ audio.currentTime=0; audio.play().catch(()=>{}); } }
playSound(gameStartSound); // ØµØ¯Ø§ÛŒ Ø´Ø±ÙˆØ¹ Ø¨Ø§Ø²ÛŒ
playBgMusic();

// Ø¨Ú©â€ŒÚ¯Ø±Ø§Ù†Ø¯
function initBackground(){
    backgroundObjects.length=0;
    const treeEmojis=['ğŸŒ²','ğŸŒ³','ğŸŒ´','ğŸ•ï¸','ğŸï¸'];
    for(let i=0;i<TREE_COUNT;i++){
        let emoji=treeEmojis[Math.floor(Math.random()*treeEmojis.length)];
        backgroundObjects.push({emoji:emoji, x:Math.random()*width, y:height*0.7+Math.random()*50, size:height*0.07, speed:BG_SCROLL_SPEED});
    }
}
initBackground();

function addEnemy(){ enemies.push({emoji:enemyEmojis[Math.floor(Math.random()*enemyEmojis.length)], x:width+50, y:height*0.75-height*0.05, size:height*0.05, speed:ENEMY_BASE_SPEED, passed:false}); }
function spawnEnemy(){ if(enemies.length===0 || enemies[enemies.length-1].x<width-width*0.5) addEnemy(); }

function addStar(){ stars.push({emoji:starEmoji, x:width+50, y:height*0.5+Math.random()*-50, size:height*0.05, speed:1.5}); }
function addHeart(){ hearts.push({emoji:heartEmoji, x:width+50, y:height*0.5+Math.random()*-50, size:height*0.06, speed:1.5}); }

function spawnSkyItem(){ 
    if(skyItems.length>=3) return;
    let emoji = skyObjects[Math.floor(Math.random()*skyObjects.length)];
    skyItems.push({emoji:emoji, x:-50, y:Math.random()*height*0.3, size:height*0.06, speed:0.5+Math.random()*0.7, direction:1});
}

function update(){
    if(gameOver) return;

    // Ø¨Ø§Ø²ÛŒÚ©Ù†
    player.vy+=gravity;
    player.y+=player.vy;
    if(player.y+player.h>=height*0.75){player.y=height*0.75-player.h; player.vy=0; player.onGround=true;}

    // Ø¨Ú©â€ŒÚ¯Ø±Ø§Ù†Ø¯
    backgroundObjects.forEach(obj=>{obj.x-=obj.speed*(width/1000); if(obj.x+obj.size<0) obj.x=width;});

    // Ø¯Ø´Ù…Ù†
    lastEnemyTime+=16;
    let enemySpawnRate=2000-Math.min(time/100,1500);
    if(lastEnemyTime>enemySpawnRate){ spawnEnemy(); lastEnemyTime=0; }
    const speedMultiplier=1 + (MAX_SPEED_MULTIPLIER-1)*Math.min(time,SPEED_RAMP_DURATION)/SPEED_RAMP_DURATION;

    enemies.forEach((e,i)=>{
        let currentSpeed = e.speed*speedMultiplier*(width/1000);
        e.x-=currentSpeed;
        if(e.x+e.size<player.x && !e.passed){score+=1; e.passed=true;}
        if(e.x+e.size<0) enemies.splice(i,1);

        const playerHit=0.8, enemyHit=0.7;
        const px=player.x+(player.w*playerHit)/2, py=player.y+(player.h*playerHit)/2, pw=player.w*playerHit, ph=player.h*playerHit;
        const ex=e.x+(e.size*enemyHit)/2, ey=e.y+(e.size*enemyHit)/2, ew=e.size*enemyHit, eh=e.size*enemyHit;
        if(px<pw+ex && px+pw>ex && py<ey+eh && py+ph>ey){
            playSound(hitSound);
            player.lives--; enemies.splice(i,1);
            if(player.lives<=0){ playSound(gameOverSound); gameOver=true; document.getElementById('restartBtn').style.display='block'; }
        }
    });

    // Ø³ØªØ§Ø±Ù‡
    if(Math.random()<STAR_SPAWN_CHANCE) addStar();
    stars.forEach((s,i)=>{ s.x-=s.speed*(width/1000); if(s.x+s.size<0) stars.splice(i,1); 
        if(player.x<s.x+s.size && player.x+player.w>s.x && player.y<s.y+s.size && player.y+player.h>s.y){
            playSound(starSound); score+=2; stars.splice(i,1);
        }
    });

    // Ù‚Ù„Ø¨
    if(Math.random()<HEART_SPAWN_CHANCE) addHeart();
    hearts.forEach((h,i)=>{ h.x-=h.speed*(width/1000); if(h.x+h.size<0) hearts.splice(i,1);
        if(player.x<h.x+h.size && player.x+player.w>h.x && player.y<h.y+h.size && player.y+player.h>h.y){
            playSound(heartSound); if(player.lives<5) player.lives++; score+=10; hearts.splice(i,1);
        }
    });

    // Ø¹Ù†Ø§ØµØ± Ø¢Ø³Ù…Ø§Ù†
    if(Math.random()<SKY_ITEM_SPAWN_CHANCE) spawnSkyItem();
    skyItems.forEach((s,i)=>{ s.x+=s.speed*s.direction*(width/1000); if(s.x>width+100) skyItems.splice(i,1); });
}

function draw(){
    ctx.clearRect(0,0,width,height);
    ctx.fillStyle='#87CEEB'; ctx.fillRect(0,0,width,height);

    ctx.font=height*0.12+"px Arial"; ctx.fillText('â˜€ï¸', width*0.8, height*0.2);
    skyItems.forEach(s=>{ ctx.font=s.size+"px Arial"; ctx.fillText(s.emoji,s.x,s.y); });
    backgroundObjects.forEach(obj=>{ ctx.font=obj.size+"px Arial"; ctx.fillText(obj.emoji,obj.x,obj.y); });

    ctx.fillStyle='#654321'; ctx.fillRect(0,height*0.75,width,height*0.25);

    ctx.font=player.h+"px Arial"; ctx.fillText(playerEmoji, player.x, player.y+player.h);
    enemies.forEach(e=>{ ctx.font=e.size+"px Arial"; ctx.fillText(e.emoji,e.x,e.y+e.size); });
    stars.forEach(s=>{ ctx.font=s.size+"px Arial"; ctx.fillText(s.emoji,s.x,s.y+s.size); });
    hearts.forEach(h=>{ ctx.font=h.size+"px Arial"; ctx.fillText(h.emoji,h.x,h.y+h.size); });

    document.getElementById('overlay').innerHTML='â¤ï¸'.repeat(player.lives)+' &nbsp; â­ '+score+' &nbsp; â° '+Math.floor(time/1000);
}

function gameLoop(){ if(!gameOver) time+=16; update(); draw(); if(!gameOver) requestAnimationFrame(gameLoop); }

document.getElementById('restartBtn').addEventListener('click', ()=>{
    player.lives=3; score=0; time=0; gameOver=false; enemies=[]; stars=[]; hearts=[]; skyItems=[];
    initPlayer(); initBackground();
    document.getElementById('restartBtn').style.display='none';
    playSound(gameStartSound);
    requestAnimationFrame(gameLoop);
});

document.getElementById("homeBtn").addEventListener("click", ()=>{ window.location.href="index.html"; });
document.getElementById("helpBtn").addEventListener("click", ()=>{ document.getElementById("helpModal").style.display="flex"; });
document.getElementById("closeHelp").addEventListener("click", ()=>{ document.getElementById("helpModal").style.display="none"; });
window.addEventListener("click", (e)=>{ if(e.target===document.getElementById("helpModal")) document.getElementById("helpModal").style.display="none"; });

requestAnimationFrame(gameLoop);
</script>




<script>
// Ø¬Ù„ÙˆÚ¯ÛŒØ±ÛŒ Ø§Ø² Ù…Ù†ÙˆÛŒ Ø±Ø§Ø³Øª Ú©Ù„ÛŒÚ© Ùˆ Ú©Ù¾ÛŒ Ú©Ø±Ø¯Ù†
document.addEventListener('contextmenu', e => e.preventDefault());
document.addEventListener('selectstart', e => e.preventDefault());
document.addEventListener('copy', e => e.preventDefault());

document.addEventListener('keydown', function(e){
    // Ø¬Ù„ÙˆÚ¯ÛŒØ±ÛŒ Ø§Ø² F12
    if(e.key === 'F12') e.preventDefault();
    
    // Ø¬Ù„ÙˆÚ¯ÛŒØ±ÛŒ Ø§Ø² Ú©Ù„ÛŒØ¯Ù‡Ø§ÛŒ ØªØ±Ú©ÛŒØ¨ÛŒ Ctrl
    if (e.ctrlKey) {
        const key = e.key.toLowerCase();
        
        // Ø¬Ù„ÙˆÚ¯ÛŒØ±ÛŒ Ø§Ø² Ctrl + S (Ø°Ø®ÛŒØ±Ù‡) Ùˆ Ctrl + U (Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ø³ÙˆØ±Ø³)
        if (key === 's' || key === 'u') {
            e.preventDefault();
        }
        
        // Ø¬Ù„ÙˆÚ¯ÛŒØ±ÛŒ Ø§Ø² Ctrl + Shift + I (Ø§Ø¨Ø²Ø§Ø±Ù‡Ø§ÛŒ ØªÙˆØ³Ø¹Ù‡â€ŒØ¯Ù‡Ù†Ø¯Ù‡)
        if (e.shiftKey && key === 'i') {
            e.preventDefault();
        }
    }
});
</script>

<script data-name="BMC-Widget" data-cfasync="false" src="https://cdnjs.buymeacoffee.com/1.0.0/widget.prod.min.js" data-id="aigame" data-description="Support me on Buy me a coffee!" data-message="Donate" data-color="#FF813F" data-position="Right" data-x_margin="50" data-y_margin="50"></script>

</body>
</html>
