<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>ğŸ® Matching Pairs Emoji</title>
<style>
body {
  font-family: Arial, sans-serif;
  background: linear-gradient(to bottom, #f0f8ff, #cce7ff);
  margin:0;
  display:flex;
  justify-content:center;
  align-items:center;
  height:100vh;
}

.screen { display:none; width: 90%; max-width: 700px; text-align:center; }
.active { display:block; }
h1,h2,h3 { margin:10px 0; color:#333; }

.level-button { 
  margin:5px; 
  padding:16px 22px;
  font-size:22px;
  cursor:pointer; 
  background-color:#4CAF50; 
  color:white; 
  border:none; 
  border-radius:8px; 
  transition:0.2s; 
}
.level-button:hover:not(.locked) { background-color:#45a049; }
.locked { opacity:0.4; cursor:not-allowed; background-color:#999; }

#top-bar { 
  display:flex; 
  justify-content:space-around; 
  font-size:22px;
  margin-top:10px; 
  background:#333; 
  color:white; 
  padding:10px 0; 
  border-radius:8px; 
}

#game-container {
  margin-top:20px;
  display:grid;
  justify-content:center;
  gap:10px;
}

.card {
  width:80px;
  height:80px;
  background-color:white;
  border-radius:10px;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:40px;
  cursor:pointer;
  box-shadow:0 3px 8px rgba(0,0,0,0.2);
  transition: transform 0.2s;
}
.card.flipped {
  background-color:#fff5e6;
  transform:scale(1.05);
}
.card.matched {
  background-color:#d4edda;
  cursor:default;
}

#hints button { 
  margin:5px; 
  padding:12px 28px; 
  font-size:22px; 
  color:white; 
  border:none; 
  border-radius:8px; 
  cursor:pointer; 
  transition:0.2s; 
}

#hint-btn { background-color:#f44336; }
#hint-btn:hover { background-color:#d7372a; }
#addtime-btn { background-color:#4CAF50; }
#addtime-btn:hover { background-color:#3e8e41; }
.disabled-button { opacity:0.4; cursor:not-allowed; pointer-events:none; }

.particle { 
  position:absolute; 
  font-size:24px; 
  animation: rise 1s ease-out forwards; 
}

@keyframes rise { 
  0% { opacity:1; transform: translateY(0) scale(1); } 
  100% { opacity:0; transform: translateY(-100px) scale(1.5); } 
}

/* ğŸµ Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ÛŒ Ù¾Ø§ÛŒÛŒÙ† ØµÙØ­Ù‡ */
.music-btn, .help-btn, .home-btn {
  position: fixed;
  bottom: 50px;
  background: rgba(255, 255, 255, 0.2);
  color: #ff9800;
  border: 2px solid #fff;
  border-radius: 30px;
  padding: 10px 18px;
  cursor: pointer;
  font-size: 1rem;
  backdrop-filter: blur(5px);
  transition: 0.3s;
  z-index: 1000;
}
.music-btn:hover, .help-btn:hover, .home-btn:hover {
  background: rgba(255, 255, 255, 0.4);
  transform: scale(1.05);
}
.music-btn { left: 50px; }
.help-btn { left: 200px; }
.home-btn { left: 350px; } /* Ø¬Ø§ÛŒÚ¯Ø§Ù‡ Ø¯Ú©Ù…Ù‡ Ø®Ø§Ù†Ù‡ Ø¬Ø§Ø¨Ø¬Ø§ Ø´Ø¯ */

/* ğŸ® Help Modal */
.help-modal {
  display: none;
  position: fixed;
  z-index: 2000;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0,0,0,0.6);
  justify-content: center;
  align-items: center;
}
.help-content {
  background: #fff;
  color: #ff5722;
  padding: 30px;
  border-radius: 15px;
  width: 90%;
  max-width: 500px;
  text-align: center;
  box-shadow: 0 0 25px rgba(0,0,0,0.3);
  animation: fadeIn 0.3s ease-in-out;
}
.help-content h2 { color: #0079a1; margin-bottom: 10px; }
.close-help {
  background: #0079a1;
  color: #fff;
  border: none;
  border-radius: 20px;
  padding: 10px 20px;
  font-size: 1rem;
  margin-top: 15px;
  cursor: pointer;
  transition: 0.3s;
}
.close-help:hover { background: #009fc4; }
@keyframes fadeIn {
  from {opacity:0; transform: scale(0.9);}
  to {opacity:1; transform: scale(1);}
}
</style>
</head>
<body>

<div id="menu-screen" class="screen active">
  <h1>ğŸ® Matching Pairs Emoji</h1>
  <h3>Seasons</h3>
  <div id="seasons"></div>
</div>

<div id="season-screen" class="screen">
  <h2 id="season-title"></h2>
  <div id="levels"></div>
  <button class="level-button" style="background-color:#555;" onclick="backToMenu()">ğŸ”™ Back</button>
</div>

<div id="game-screen" class="screen">
  <div id="top-bar">
    <span id="time">â± Time: 30</span>
    <span id="lives">â¤ï¸â¤ï¸â¤ï¸</span>
    <span id="score">â­ Score: 0</span>
    <span id="level-num">ğŸ“ˆ Level: 1</span>
  </div>
  <div id="game-container"></div>
  <div id="hints">
    <button id="hint-btn" onclick="useHint()">ğŸ’¡ Hint</button>
    <button id="addtime-btn" onclick="addTime()">â± Add Time</button> 
  </div>
</div>

<audio id="correct-sound" src="win.mp3"></audio>
<audio id="wrong-sound" src="lose.mp3"></audio>
<audio id="gameover-sound" src="gameover.mp3"></audio>

<audio id="bgMusic" src="music.mp3" loop autoplay></audio>
<button id="musicToggle" class="music-btn">ğŸ”Š Music On</button>
<button id="helpBtn" class="help-btn">â“ Help</button>
<button id="homeBtn" class="home-btn">ğŸ  Home</button>

<div id="helpModal" class="help-modal">
  <div class="help-content">
    <h2>ğŸ¯ How to Play</h2>
    <p>
      Match all emoji pairs before time runs out!<br><br>
      Each wrong pair costs one â¤ï¸.<br>
      Use ğŸ’¡ Hint to briefly reveal one pair.<br>
      Use â± Add Time to get 10 extra seconds.<br><br>
      Beat levels to unlock more seasons! ğŸš€
    </p>
    <button id="closeHelp" class="close-help">Close âœ–ï¸</button>
  </div>
</div>

<script>
// ==========================
// ğŸ® ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø§ÙˆÙ„ÛŒÙ‡ Ø¨Ø§Ø²ÛŒ
// ==========================
const seasonsData = [
  { name: "Season 1", levels: 25 },
  { name: "Season 2", levels: 25 },
  { name: "Season 3", levels: 25 },
  { name: "Season 4", levels: 25 }
];

const emojis = ["ğŸ","ğŸŒ","ğŸ‡","ğŸ“","ğŸ¥","ğŸ","ğŸ‘","ğŸ’","ğŸ‰","ğŸ¥­","ğŸ‹","ğŸŠ","ğŸ¥‘","ğŸˆ","ğŸ","ğŸ¥¥","ğŸ","ğŸ…","ğŸ¥•","ğŸŒ½","ğŸ†","ğŸ¥”","ğŸ ","ğŸ¥¦","ğŸ¥¬","ğŸ„","ğŸŒ¶","ğŸ§„","ğŸ§…","ğŸ¥œ","ğŸŒ°","ğŸ¥¯","ğŸ¥¨","ğŸ¥","ğŸ§‡","ğŸ¥©","ğŸ—","ğŸ–","ğŸŒ­","ğŸ”","ğŸŸ","ğŸ•","ğŸ¥ª","ğŸ¥™","ğŸŒ®","ğŸŒ¯","ğŸ¥—","ğŸ¿"];

let currentSeason = 0;
let currentLevel = 1;
let score = 0;
let lives = 3;
let timeLeft = 30;
let timerInterval;
let firstCard = null;
let secondCard = null;
let hintUsed = false;
let timeAdded = false;
let maxLevelCompleted = {};
let maxSeasonUnlocked = 0;

// ==========================
// ğŸ’¾ Ø°Ø®ÛŒØ±Ù‡ Ùˆ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ ÙˆØ¶Ø¹ÛŒØª
// ==========================
function saveProgress() {
    localStorage.setItem('maxLevelCompleted', JSON.stringify(maxLevelCompleted));
    localStorage.setItem('maxSeasonUnlocked', maxSeasonUnlocked);
}

function loadProgress() {
    const levelData = localStorage.getItem('maxLevelCompleted');
    const seasonData = localStorage.getItem('maxSeasonUnlocked');
    if (levelData) maxLevelCompleted = JSON.parse(levelData);
    if (seasonData !== null) maxSeasonUnlocked = parseInt(seasonData, 10);
    if (!maxLevelCompleted[0]) maxLevelCompleted[0] = 0;
}
loadProgress();

// ==========================
// ğŸŒŸ Ù…Ù†Ùˆ ÙØµÙ„â€ŒÙ‡Ø§
// ==========================
const seasonsContainer = document.getElementById("seasons");
function renderSeasonButtons() {
    seasonsContainer.innerHTML = "";
    seasonsData.forEach((season, index) => {
        const btn = document.createElement("button");
        btn.className = "level-button";
        btn.textContent = season.name;
        if(index > maxSeasonUnlocked) {
            btn.classList.add("locked");
            btn.title = "Complete the previous season to unlock!";
        } else {
            btn.onclick = () => openSeason(index);
        }
        seasonsContainer.appendChild(btn);
    });
}
renderSeasonButtons();

function openSeason(seasonIndex) {
  if (seasonIndex > maxSeasonUnlocked) return;
  currentSeason = seasonIndex;
  document.getElementById("season-title").textContent = seasonsData[seasonIndex].name;
  const levelsDiv = document.getElementById("levels");
  levelsDiv.innerHTML = "";
  const maxCompleted = maxLevelCompleted[currentSeason] || 0;
  for(let i=1;i<=seasonsData[seasonIndex].levels;i++){
    const btn = document.createElement("button");
    btn.className = "level-button";
    btn.textContent = "Level " + i;
    if(i > maxCompleted+1){
        btn.classList.add("locked");
        btn.title = "Complete Level " + (i-1) + " to unlock!";
    } else btn.onclick = () => startLevel(i);
    levelsDiv.appendChild(btn);
  }
  showScreen("season-screen");
}

function backToMenu() {
  renderSeasonButtons();
  showScreen("menu-screen");
}

function showScreen(screenId) {
  document.querySelectorAll(".screen").forEach(s => s.classList.remove("active"));
  document.getElementById(screenId).classList.add("active");
}

// ==========================
// ğŸ² Ø´Ø±ÙˆØ¹ Ù…Ø±Ø­Ù„Ù‡
// ==========================
function startLevel(levelNum) {
  const maxCompleted = maxLevelCompleted[currentSeason] || 0;
  if(levelNum > maxCompleted+1) return;

  currentLevel = levelNum;
  timeLeft = 30 + Math.floor(levelNum / 2) * 5;
  lives = 3; 
  firstCard = null;
  secondCard = null;
  hintUsed = false;
  timeAdded = false;
  document.getElementById("hint-btn").classList.remove("disabled-button");
  document.getElementById("addtime-btn").classList.remove("disabled-button");
  document.getElementById("level-num").textContent = "ğŸ“ˆ Level: " + currentLevel;
  document.getElementById("score").textContent = "â­ Score: " + score;
  document.getElementById("lives").textContent = "â¤ï¸".repeat(lives);
  document.getElementById("time").textContent = "â± Time: " + timeLeft;

  generateCards(levelNum);
  showScreen("game-screen");

  // Ù†Ù…Ø§ÛŒØ´ Ú©Ø§Ø±Øªâ€ŒÙ‡Ø§ Ø¨Ø±Ø§ÛŒ 3 Ø«Ø§Ù†ÛŒÙ‡
  document.querySelectorAll(".card").forEach(c => {
      c.textContent = c.dataset.emoji;
      c.classList.add("flipped");
  });
  setTimeout(() => {
      document.querySelectorAll(".card").forEach(c => {
          c.textContent = "?";
          c.classList.remove("flipped");
      });
      startTimer();
  }, 1000);
}

// ==========================
// â± ØªØ§ÛŒÙ…Ø±
// ==========================
function startTimer() {
  clearInterval(timerInterval);
  timerInterval = setInterval(() => {
    timeLeft--;
    document.getElementById("time").textContent = "â± Time: " + timeLeft;
    if(timeLeft <= 0) gameOver();
  },1000);
}

// ==========================
// ğŸƒ Ú©Ø§Ø±Øªâ€ŒÙ‡Ø§
// ==========================
function generateCards(levelNum) {
  const gameContainer = document.getElementById("game-container");
  gameContainer.innerHTML = "";
  let pairCount = Math.min(2 + Math.floor((currentSeason*seasonsData[0].levels + levelNum)/5), 18); 
  let selectedEmojis = shuffle(emojis).slice(0,pairCount);
  let cardEmojis = shuffle([...selectedEmojis, ...selectedEmojis]);

  let cols = Math.ceil(Math.sqrt(pairCount*2));
  if (pairCount*2 === 20) cols = 5;
  if (pairCount*2 === 24) cols = 6;
  gameContainer.style.gridTemplateColumns = `repeat(${cols}, 80px)`;

  cardEmojis.forEach(e => {
    const card = document.createElement("div");
    card.className = "card";
    card.dataset.emoji = e;
    card.textContent = "?";
    card.onclick = () => flipCard(card);
    gameContainer.appendChild(card);
  });
}

// ==========================
// ğŸ”„ Ø¨Ø±Ú¯Ø±Ø¯Ø§Ù†Ø¯Ù† Ú©Ø§Ø±Øªâ€ŒÙ‡Ø§
// ==========================
function flipCard(card) {
  if(card.classList.contains("flipped") || card.classList.contains("matched") || secondCard) return;

  card.classList.add("flipped");
  card.textContent = card.dataset.emoji;

  if(!firstCard) firstCard = card;
  else {
    secondCard = card;
    checkMatch();
  }
}

// ==========================
// âœ… Ø¨Ø±Ø±Ø³ÛŒ ØªØ·Ø§Ø¨Ù‚
// ==========================
function checkMatch() {
  if(firstCard.dataset.emoji === secondCard.dataset.emoji) {
    firstCard.classList.add("matched");
    secondCard.classList.add("matched");
    document.getElementById("correct-sound").play();
    score += 10;
    document.getElementById("score").textContent = "â­ Score: " + score;
    resetSelection();
    checkWin();
  } else {
    document.getElementById("wrong-sound").play();
    lives--;
    document.getElementById("lives").textContent = "â¤ï¸".repeat(lives);
    setTimeout(() => {
      if(!firstCard.classList.contains("matched")){
        firstCard.textContent = "?";
        firstCard.classList.remove("flipped");
      }
      if(!secondCard.classList.contains("matched")){
        secondCard.textContent = "?";
        secondCard.classList.remove("flipped");
      }
      resetSelection();
      if(lives <= 0) gameOver();
    }, 500);
  }
}

function resetSelection() {
  firstCard = null;
  secondCard = null;
}

// ==========================
// ğŸ‰ Ø¨Ø±Ø±Ø³ÛŒ Ø¨Ø±Ø¯
// ==========================
function checkWin() {
  const totalCards = document.querySelectorAll(".card").length;
  const matchedCards = document.querySelectorAll(".card.matched").length;
  if(matchedCards === totalCards){
    alert("ğŸŠ You completed Level " + currentLevel + "!");
    clearInterval(timerInterval);
    maxLevelCompleted[currentSeason] = Math.max(maxLevelCompleted[currentSeason] || 0, currentLevel);
    const isLastLevel = currentLevel === seasonsData[currentSeason].levels;
    const isLastSeason = currentSeason === seasonsData.length - 1;

    if(isLastLevel){
        if(!isLastSeason){
            maxSeasonUnlocked = Math.max(maxSeasonUnlocked, currentSeason+1);
            alert("ÙØµÙ„ Ø¬Ø¯ÛŒØ¯ Ø¨Ø§Ø² Ø´Ø¯! ğŸš€");
            backToMenu();
        } else {
            alert("Ø´Ù…Ø§ ØªÙ…Ø§Ù… ÙØµÙ„â€ŒÙ‡Ø§ Ùˆ Ù…Ø±Ø§Ø­Ù„ Ø¨Ø§Ø²ÛŒ Ø±Ø§ Ø¨Ù‡ Ù¾Ø§ÛŒØ§Ù† Ø±Ø³Ø§Ù†Ø¯ÛŒØ¯! ğŸ‘‘");
            backToMenu();
        }
    } else startLevel(currentLevel+1);
    saveProgress();
  }
}

// ==========================
// ğŸ’€ Ø¨Ø§Ø®Øª
// ==========================
function gameOver() {
  clearInterval(timerInterval);
  document.getElementById("gameover-sound").play();
  alert("ğŸ’” Game Over!");
  showScreen("menu-screen");
}

// ==========================
// ğŸ’¡ Ù‡ÛŒÙ†Øª
// ==========================
function useHint() {
  if(hintUsed){
    alert("You have already used the hint for this level!");
    return;
  }
  hintUsed = true;
  document.getElementById("hint-btn").classList.add("disabled-button");

  const unmatched = Array.from(document.querySelectorAll(".card:not(.matched):not(.flipped)"));
  if(unmatched.length < 2) return;

  let pair = null;
  for(let i=0;i<unmatched.length;i++){
      for(let j=i+1;j<unmatched.length;j++){
          if(unmatched[i].dataset.emoji === unmatched[j].dataset.emoji){
              pair=[unmatched[i],unmatched[j]];
              break;
          }
      }
      if(pair) break;
  }
  if(pair){
      pair.forEach(c => c.textContent = c.dataset.emoji);
      setTimeout(()=>{ 
          pair.forEach(c=>c.textContent="?");
      },1000);
  }
}

// ==========================
// â± Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† Ø²Ù…Ø§Ù†
// ==========================
function addTime() {
  if(timeAdded){
    alert("You have already used Add Time for this level!");
    return;
  }
  timeAdded = true;
  document.getElementById("addtime-btn").classList.add("disabled-button");
  timeLeft += 10;
  document.getElementById("time").textContent = "â± Time: " + timeLeft;
}

// ==========================
// ğŸ”€ Ø´Ø§ÙÙ„
// ==========================
function shuffle(array) {
  let a = array.slice();
  for(let i=a.length-1;i>0;i--){
    const j=Math.floor(Math.random()*(i+1));
    [a[i],a[j]]=[a[j],a[i]];
  }
  return a;
}

// ==========================
// ğŸ”Š Ù…ÙˆØ³ÛŒÙ‚ÛŒ Ùˆ Ø±Ø§Ù‡Ù†Ù…Ø§
// ==========================
const bgMusic = document.getElementById("bgMusic");
const musicBtn = document.getElementById("musicToggle");
musicBtn.onclick = () => {
    if(bgMusic.paused){ bgMusic.play(); musicBtn.textContent="ğŸ”Š Music On"; }
    else { bgMusic.pause(); musicBtn.textContent="ğŸ”‡ Music Off"; }
}

const helpModal = document.getElementById("helpModal");
const helpBtn = document.getElementById("helpBtn");
const closeHelp = document.getElementById("closeHelp");
helpBtn.onclick = () => helpModal.style.display="flex";
closeHelp.onclick = () => helpModal.style.display="none";
window.onclick = e => { if(e.target==helpModal) helpModal.style.display="none"; }

document.getElementById("homeBtn").onclick = backToMenu;

</script>



</script>

<script>
document.addEventListener('contextmenu', e => e.preventDefault());
document.addEventListener('selectstart', e => e.preventDefault());
document.addEventListener('copy', e => e.preventDefault());
document.addEventListener('keydown', function(e){
    if (e.ctrlKey && (e.key === 's' || e.key === 'S' || e.key === 'u' || e.key === 'U')) e.preventDefault();
    if (e.ctrlKey && e.shiftKey && (e.key === 'I'|| e.key === 'i')) e.preventDefault();
    if(e.key === 'F12') e.preventDefault();
});
</script>

<script data-name="BMC-Widget" data-cfasync="false" src="https://cdnjs.buymeacoffee.com/1.0.0/widget.prod.min.js" data-id="aigame" data-description="Support me on Buy me a coffee!" data-message="Donate" data-color="#FF813F" data-position="Right" data-x_margin="50" data-y_margin="50"></script>


</body>
</html>
