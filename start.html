<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>ğŸ Fruit Math Game ğŸ‰</title>
<style>
body {
  font-family: Arial, sans-serif;
  background: linear-gradient(to bottom, #f0f8ff, #cce7ff);
  margin:0;
  display:flex;
  justify-content:center;
  align-items:center;
  height:100vh;
}

.screen { display:none; width: 90%; max-width: 600px; text-align:center; }
.active { display:block; }
h1,h2,h3 { margin:10px 0; color:#333; }

/* Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ÛŒ ÙØµÙ„ Ùˆ Ù…Ø±Ø­Ù„Ù‡ */
.level-button { 
  margin:5px; 
  padding:16px 22px; /* Ø¨Ø²Ø±Ú¯â€ŒØªØ± */
  font-size:22px; /* Ø¨Ø²Ø±Ú¯â€ŒØªØ± */
  cursor:pointer; 
  background-color:#4CAF50; 
  color:white; 
  border:none; 
  border-radius:8px; 
  transition:0.2s; 
}
.level-button:hover { background-color:#45a049; }
.locked { opacity:0.4; cursor:not-allowed; background-color:#999; }

/* ÙÙ‚Ø· Ø¹Ù†Ø§ØµØ± Ø¨Ø§Ø²ÛŒ Ø¨Ø²Ø±Ú¯â€ŒØªØ± Ø´Ø¯Ù‡ */
#game-container {
  margin-top:20px;
  transform: scale(1.5); /* 30% Ø¨Ø²Ø±Ú¯â€ŒØªØ± */
  transform-origin: top center;
}

#equation { 
  font-size:28px; 
  line-height:1.5; 
  background:#fff; 
  padding:20px; 
  border-radius:12px; 
  display:inline-block; 
  box-shadow:0 4px 12px rgba(0,0,0,0.2); 
}

#answers input { 
  font-size:32px; /* Ø¨Ø²Ø±Ú¯â€ŒØªØ± */
  width:180px; 
  text-align:center; 
  padding:14px; 
  border:2px solid #ddd; 
  border-radius:8px; 
}
#answers button { 
  font-size:28px; /* Ø¨Ø²Ø±Ú¯â€ŒØªØ± */
  padding:12px 28px; 
  margin-left:10px; 
  background-color:#008CBA; 
  color:white; 
  border:none; 
  border-radius:8px; 
  cursor:pointer; 
  transition:0.2s; 
}
#answers button:hover { background-color:#0079a1; }

#hints button { 
  margin:5px; 
  padding:12px 28px; 
  font-size:24px; 
  color:white; 
  border:none; 
  border-radius:8px; 
  cursor:pointer; 
  transition:0.2s; 
}

/* âœ… ØªØºÛŒÛŒØ± Ø±Ù†Ú¯ Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ */
#hint-btn { background-color:#f44336; } /* Ù‚Ø±Ù…Ø² */
#hint-btn:hover { background-color:#d7372a; }
#addtime-btn { background-color:#4CAF50; } /* Ø³Ø¨Ø² */
#addtime-btn:hover { background-color:#3e8e41; }

.disabled-button { opacity:0.4; cursor:not-allowed; pointer-events:none; }

#top-bar { 
  display:flex; 
  justify-content:space-around; 
  font-size:24px; /* Ø¨Ø²Ø±Ú¯â€ŒØªØ± */
  margin-top:20px; 
  background:#333; 
  color:white; 
  padding:16px 0; 
  border-radius:8px; 
}

.particle { 
  position:absolute; 
  font-size:24px; 
  animation: rise 1s ease-out forwards; 
}

@keyframes rise { 
  0% { opacity:1; transform: translateY(0) scale(1); } 
  100% { opacity:0; transform: translateY(-100px) scale(1.5); } 
}
</style>
</head>
<body>

<!-- ØµÙØ­Ù‡ Ù…Ù†Ùˆ -->
<div id="menu-screen" class="screen active">
  <h1>ğŸ Fruit Math Game ğŸ‰</h1>
  <h3>Seasons</h3>
  <div id="seasons"></div>
</div>

<!-- ØµÙØ­Ù‡ ÙØµÙ„â€ŒÙ‡Ø§ -->
<div id="season-screen" class="screen">
  <h2 id="season-title"></h2>
  <div id="levels"></div>
  <button class="level-button" style="background-color:#555;" onclick="backToMenu()">ğŸ”™ Back</button>
  <br>
</div>

<!-- ØµÙØ­Ù‡ Ø¨Ø§Ø²ÛŒ -->
<div id="game-screen" class="screen">
  <div id="top-bar">
    <span id="time">â± Time: 60</span>
    <span id="lives">â¤ï¸â¤ï¸â¤ï¸</span>
    <span id="score">â­ Score: 0</span>
    <span id="level-num">ğŸ“ˆ Level: 1</span>
  </div>
  <div id="game-container">
    <div id="equation"></div>
    <div id="answers">
      <input type="text" id="answer" inputmode="numeric" pattern="^-?[0-9]*$" placeholder="Answer">
      <button onclick="checkAnswer()">âœ”ï¸</button>
    </div>
    <div id="hints">
      <button id="hint-btn" onclick="useHint()">ğŸ’¡ Hint</button>
      <button id="addtime-btn" onclick="useAddTime()">â± Add Time</button>
    </div>
  </div>
</div>

<!-- ØµØ¯Ø§Ù‡Ø§ -->
<audio id="correct-sound" src="https://raw.githubusercontent.com/saeedt70/mathgame/main/win.mp3"></audio>
<audio id="wrong-sound" src="https://raw.githubusercontent.com/saeedt70/mathgame/main/lose.mp3"></audio>
<audio id="gameover-sound" src="https://raw.githubusercontent.com/saeedt70/mathgame/main/gameover.mp3"></audio>

<script>
const fruits = ["ğŸ","ğŸŒ","ğŸ‰","ğŸ‡","ğŸ", "ğŸ“"];
let timer = 60, lives = 3, score = 0;
let currentLevel = 0, currentSeason = 0;
let currentEquation, timerInterval;
let hintUsed=false, addTimeUsed=false;

function donate(){
  window.open("https://buymeacoffee.com/aigame");
}

// ØªÙˆÙ„ÛŒØ¯ Ù…Ø±Ø§Ø­Ù„
function generateLevels(count){
    const generatedLevels=[];
    for(let i=0;i<count;i++){
        const fruitValues={};
        let availableFruits=[...fruits];
        const neededFruits=[];
        for(let j=0;j<3;j++){
            const index=Math.floor(Math.random()*availableFruits.length);
            neededFruits.push(availableFruits[index]);
            availableFruits.splice(index,1);
        }
        neededFruits.forEach(f=>{ if(!(f in fruitValues)) fruitValues[f]=Math.floor(Math.random()*8)+2; });
        const f=neededFruits[0], g=neededFruits[1], h=neededFruits[2];
        const val_f=fruitValues[f], val_g=fruitValues[g], val_h=fruitValues[h];
        const line1=`${f} + ${f} + ${f} = ${val_f*3}`;
        const line2=`${g} + ${g} + ${f} = ${(val_g*2)+val_f}`;
        const line3=`${h} + ${f} - ${g} = ${val_h+val_f-val_g}`;
        const line4=`${f} * ${g} - ${h} = ?`;
        const finalAnswer=(val_f*val_g)-val_h;
        generatedLevels.push({lines:[line1,line2,line3,line4], answer:finalAnswer, fruitValues:fruitValues});
    }
    return generatedLevels;
}
const levels=generateLevels(100);

// Ù…Ù†Ùˆ
function initMenu(){
    let seasonsDiv=document.getElementById("seasons");
    seasonsDiv.innerHTML='';
    for(let s=0;s<4;s++){
        let btn=document.createElement("button");
        btn.innerText=`Season ${s+1}`;
        btn.className="level-button";
        if(s*25>score){ btn.classList.add("locked"); btn.disabled=true;}
        btn.onclick=()=> openSeason(s);
        seasonsDiv.appendChild(btn);
    }
}

function openSeason(season){
    currentSeason=season;
    document.getElementById("menu-screen").classList.remove("active");
    document.getElementById("season-screen").classList.add("active");
    document.getElementById("season-title").innerText=`Season ${season+1}`;
    let levelsDiv=document.getElementById("levels");
    levelsDiv.innerHTML="";
    for(let i=0;i<25;i++){
        let globalIndex=season*25+i;
        let btn=document.createElement("button");
        btn.className="level-button";
        btn.innerText=`Level ${i+1}`;
        if(globalIndex>score){ btn.classList.add("locked"); btn.disabled=true;}
        btn.onclick=()=> startLevel(globalIndex);
        levelsDiv.appendChild(btn);
    }
}

function backToMenu(){
    clearInterval(timerInterval);
    document.getElementById("season-screen").classList.remove("active");
    document.getElementById("game-screen").classList.remove("active");
    document.getElementById("menu-screen").classList.add("active");
    initMenu();
}

function goToLevelSelection(){
    clearInterval(timerInterval);
    document.getElementById("game-screen").classList.remove("active");
    document.getElementById("season-screen").classList.add("active");
    openSeason(currentSeason);
}

function startLevel(levelIndex){
    currentLevel=levelIndex;
    currentEquation=levels[levelIndex];
    document.getElementById("menu-screen").classList.remove("active");
    document.getElementById("season-screen").classList.remove("active");
    document.getElementById("game-screen").classList.add("active");
    timer=60; lives=3;
    hintUsed=false; addTimeUsed=false;
    document.getElementById("hint-btn").classList.remove("disabled-button");
    document.getElementById("addtime-btn").classList.remove("disabled-button");
    updateTopBar();
    showEquation();
    startTimer();
}

function showEquation(){
    document.getElementById("equation").innerHTML=currentEquation.lines.join("<br>");
}

function startTimer(){
    clearInterval(timerInterval);
    timerInterval=setInterval(()=>{
        timer--;
        updateTopBar();
        if(timer<=0){
            clearInterval(timerInterval);
            gameOver(true);
        }
    },1000);
}

function updateTopBar(){
    document.getElementById("time").innerText="â± Time: "+timer;
    document.getElementById("lives").innerText="â¤ï¸".repeat(lives);
    document.getElementById("score").innerText="â­ Score: "+score;
    document.getElementById("level-num").innerText="ğŸ“ˆ Level: "+(currentLevel+1);
}

function checkAnswer(){
    let user=Number(document.getElementById("answer").value);
    document.getElementById("answer").value='';
    if(user===currentEquation.answer){
        score++;
        updateTopBar();
        playCorrect();
        showParticles("ğŸ‰");
        setTimeout(()=> { alert("ğŸ‰ Correct!"); goToLevelSelection(); }, 500);
    } else{
        lives--;
        updateTopBar();
        playWrong();
        showParticles("âŒ");
        if(lives<=0) gameOver(false);
        else alert("âŒ Wrong answer. Lives left: "+lives);
    }
}

function gameOver(isTimeOut){
    playGameOver();
    showParticles("ğŸ’€");
    clearInterval(timerInterval);
    setTimeout(()=> { alert(isTimeOut?"ğŸ’€ Time's up!":"ğŸ’€ No lives left!"); backToMenu(); }, 500);
}

function simulateAd(callback){
    alert("ğŸ¬ Watch ad to unlock feature...");
    setTimeout(callback,500); 
}

function useHint(){
    if(hintUsed) return;
    simulateAd(()=>{
        const fruitsInEquation=Object.keys(currentEquation.fruitValues);
        const randomFruit=fruitsInEquation[Math.floor(Math.random()*fruitsInEquation.length)];
        const value=currentEquation.fruitValues[randomFruit];
        alert(`ğŸ’¡ Hint: ${randomFruit} = ${value}`);
        hintUsed=true;
        document.getElementById("hint-btn").classList.add("disabled-button");
    });
}

function useAddTime(){
    if(addTimeUsed) return;
    simulateAd(()=>{
        timer+=120;
        updateTopBar();
        addTimeUsed=true;
        document.getElementById("addtime-btn").classList.add("disabled-button");
    });
}

function showParticles(icon){
    for(let i=0;i<40;i++){
        const particle=document.createElement("div");
        particle.className="particle";
        particle.innerText=icon;
        particle.style.left=(Math.random()*80 +10)+"%";
        particle.style.top="80%";
        particle.style.fontSize=(Math.random()*24 +16)+"px";
        document.body.appendChild(particle);
        setTimeout(()=> particle.remove(),4000);
    }
}

function playCorrect(){
    const audio=document.getElementById("correct-sound");
    audio.currentTime=0;
    audio.play().catch(()=>{}); 
}
function playWrong(){
    const audio=document.getElementById("wrong-sound");
    audio.currentTime=0;
    audio.play().catch(()=>{});
}
function playGameOver(){
    const audio=document.getElementById("gameover-sound");
    audio.currentTime=0;
    audio.play().catch(()=>{});
}

initMenu();
</script>

<script>
document.addEventListener('contextmenu', e => e.preventDefault());
document.addEventListener('selectstart', e => e.preventDefault());
document.addEventListener('copy', e => e.preventDefault());
document.addEventListener('keydown', function(e){
    if (e.ctrlKey && (e.key === 's' || e.key === 'S' || e.key === 'u' || e.key === 'U')) e.preventDefault();
    if (e.ctrlKey && e.shiftKey && (e.key === 'I'|| e.key === 'i')) e.preventDefault();
    if(e.key === 'F12') e.preventDefault();
});
</script>

<script data-name="BMC-Widget" data-cfasync="false" src="https://cdnjs.buymeacoffee.com/1.0.0/widget.prod.min.js" data-id="aigame" data-description="Support me on Buy me a coffee!" data-message="Donate" data-color="#FF813F" data-position="Right" data-x_margin="50" data-y_margin="50"></script>




<!-- ğŸ”Š Background Music + Toggle Button -->
<audio id="bgMusic" src="music.mp3" loop autoplay></audio>

<button id="musicToggle" class="music-btn">ğŸ”Š Music On</button>

<style>
  .music-btn {
    position: fixed;
    bottom: 50px;
    left: 50px;
    background: rgba(255, 255, 255, 0.2);
    color: #fff;
    border: 2px solid #fff;
    border-radius: 30px;
    padding: 10px 18px;
    cursor: pointer;
    font-size: 1rem;
    backdrop-filter: blur(5px);
    transition: 0.3s;
    z-index: 1000;
  }

  .music-btn:hover {
    background: rgba(255, 255, 255, 0.4);
    transform: scale(1.05);
  }
</style>

<script>
  const music = document.getElementById("bgMusic");
  const toggleBtn = document.getElementById("musicToggle");

  // Ensure autoplay works after user interaction (some browsers block autoplay)
  document.addEventListener("click", () => {
    if (music.paused) {
      music.play().catch(() => {});
    }
  }, { once: true });

  toggleBtn.addEventListener("click", () => {
    if (music.paused) {
      music.play();
      toggleBtn.textContent = "ğŸ”Š Music On";
    } else {
      music.pause();
      toggleBtn.textContent = "ğŸ”‡ Music Off";
    }
  });
</script>
</body>
</html>





