<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>ğŸ Fruit Math Game ğŸ‰</title>
<style>
body {
Â  font-family: Arial, sans-serif;
Â  background: linear-gradient(to bottom, #f0f8ff, #cce7ff);
Â  margin:0;
Â  display:flex;
Â  justify-content:center;
Â  align-items:center;
Â  height:100vh;
}

.screen {
Â  display:none;
Â  width: 90%;
Â  max-width: 600px;
Â  text-align:center;
}

.active { display:block; }

h1,h2,h3 { margin:10px 0; color:#333; }

.level-button {
Â  margin:5px;
Â  padding:12px 18px;
Â  font-size:18px;
Â  cursor:pointer;
Â  background-color:#4CAF50;
Â  color:white;
Â  border:none;
Â  border-radius:8px;
Â  transition:0.2s;
}

.level-button:hover { background-color:#45a049; }
.locked {
Â  opacity:0.4;
Â  cursor:not-allowed;
Â  background-color:#999;
}

#game-container { margin-top:20px; }

#equation {
Â  font-size:28px;
Â  line-height:1.5;
Â  background:#fff;
Â  padding:20px;
Â  border-radius:12px;
Â  display:inline-block;
Â  box-shadow:0 4px 4px rgba(0,0,0,0.1); /* Ú©Ø§Ù‡Ø´ Ø³Ø§ÛŒÙ‡ Ø¨Ø±Ø§ÛŒ Ø®ÙˆØ§Ù†Ø§ÛŒÛŒ Ø¨Ù‡ØªØ± */
}

#answers input {
Â  font-size:24px;
Â  width:120px;
Â  text-align:center;
Â  padding:10px;
Â  border:2px solid #ddd;
Â  border-radius:8px;
}

#answers button {
Â  font-size:24px;
Â  padding:10px 20px;
Â  margin-left:10px;
Â  background-color:#008CBA;
Â  color:white;
Â  border:none;
Â  border-radius:8px;
Â  cursor:pointer;
Â  transition:0.2s;
}

#answers button:hover { background-color:#0079a1; }

#hints button {
Â  margin:5px;
Â  padding:10px 25px;
Â  font-size:18px;
Â  background-color:#f44336;
Â  color:white;
Â  border:none;
Â  border-radius:8px;
Â  cursor:pointer;
Â  transition:0.2s;
}

#hints button:hover { background-color:#d7372a; }

.disabled-button {
Â  opacity:0.4;
Â  cursor:not-allowed;
Â  pointer-events:none;
}

#top-bar {
Â  display:flex;
Â  justify-content:space-around;
Â  font-size:18px;
Â  margin-top:20px;
Â  background:#333;
Â  color:white;
Â  padding:12px 0;
Â  border-radius:8px;
}

.particle {
Â  position:absolute;
Â  font-size:24px;
Â  animation: rise 1s ease-out forwards;
}

@keyframes rise {
Â  0% { opacity:1; transform: translateY(0) scale(1); }
Â  100% { opacity:0; transform: translateY(-100px) scale(1.5); }
}
</style>
</head>
<body>

<div id="menu-screen" class="screen active">
Â  <h1>ğŸ Fruit Math Game ğŸ‰</h1>
Â  <h3>Seasons</h3>
Â  <div id="seasons"></div>
</div>

<div id="season-screen" class="screen">
Â  <h2 id="season-title"></h2>
Â  <div id="levels"></div>
Â  <button class="level-button" style="background-color:#555;" onclick="backToMenu()">ğŸ”™ Back</button>
</div>

<div id="game-screen" class="screen">
Â  <div id="top-bar">
Â  Â  <span id="time">â± Time: 60</span>
Â  Â  <span id="lives">â¤ï¸â¤ï¸â¤ï¸</span>
Â  Â  <span id="score">â­ Score: 0</span>
Â  Â  <span id="level-num">ğŸ“ˆ Level: 1</span>
Â  </div>
Â  <div id="game-container">
Â  Â  <div id="equation"></div>
Â  Â  <div id="answers">
Â  Â  Â  <input type="number" id="answer" placeholder="Answer">
Â  Â  Â  <button onclick="checkAnswer()">âœ”ï¸</button>
Â  Â  </div>
Â  Â  <div id="hints">
Â  Â  Â  <button id="hint-btn" onclick="useHint()">ğŸ’¡ Hint</button>
Â  Â  Â  <button id="addtime-btn" onclick="useAddTime()">â± Add Time</button>
Â  Â  </div>
Â  </div>
</div>

<audio id="correct-sound" src="https://github.com/saeedt70/mathgame/edit/main/win.mp3"></audio>
<audio id="wrong-sound" src="https://github.com/saeedt70/mathgame/edit/main/lose.mp3"></audio>
<audio id="gameover-sound" src="https://github.com/saeedt70/mathgame/edit/main/gameover.mp3"></audio>

<script>
const fruits = ["ğŸ","ğŸŒ","ğŸ‰","ğŸ‡","ğŸ", "ğŸ“"];
let timer = 60, lives = 3, score = 0;
let currentLevel = 0, currentSeason = 0;
let currentEquation, timerInterval;
let hintUsed=false, addTimeUsed=false;

// Generate levels (Ø¨Ø¯ÙˆÙ† ØªØºÛŒÛŒØ±)
function generateLevels(count){
Â  Â  const generatedLevels=[];
Â  Â  for(let i=0;i<count;i++){
Â  Â  Â  Â  const fruitValues={};
Â  Â  Â  Â  let availableFruits=[...fruits];
Â  Â  Â  Â  const neededFruits=[];
Â  Â  Â  Â  for(let j=0;j<3;j++){
Â  Â  Â  Â  Â  Â  const index=Math.floor(Math.random()*availableFruits.length);
Â  Â  Â  Â  Â  Â  neededFruits.push(availableFruits[index]);
Â  Â  Â  Â  Â  Â  availableFruits.splice(index,1);
Â  Â  Â  Â  }
Â  Â  Â  Â  neededFruits.forEach(f=>{
Â  Â  Â  Â  Â  Â  if(!(f in fruitValues)) fruitValues[f]=Math.floor(Math.random()*8)+2;
Â  Â  Â  Â  });
Â  Â  Â  Â  const f=neededFruits[0], g=neededFruits[1], h=neededFruits[2];
Â  Â  Â  Â  const val_f=fruitValues[f], val_g=fruitValues[g], val_h=fruitValues[h];
Â  Â  Â  Â  const line1=`${f} + ${f} + ${f} = ${val_f*3}`;
Â  Â  Â  Â  const line2=`${g} + ${g} + ${f} = ${(val_g*2)+val_f}`;
Â  Â  Â  Â  const line3=`${h} + ${f} - ${g} = ${val_h+val_f-val_g}`;
Â  Â  Â  Â  const line4=`${f} * ${g} - ${h} = ?`;
Â  Â  Â  Â  const finalAnswer=(val_f*val_g)-val_h;
Â  Â  Â  Â  generatedLevels.push({lines:[line1,line2,line3,line4], answer:finalAnswer, fruitValues:fruitValues});
Â  Â  }
Â  Â  return generatedLevels;
}

const levels=generateLevels(100);

// Menu (Ø¨Ø¯ÙˆÙ† ØªØºÛŒÛŒØ±)
function initMenu(){
Â  Â  let seasonsDiv=document.getElementById("seasons");
Â  Â  seasonsDiv.innerHTML='';
Â  Â  for(let s=0;s<4;s++){
Â  Â  Â  Â  let btn=document.createElement("button");
Â  Â  Â  Â  btn.innerText=`Season ${s+1}`;
Â  Â  Â  Â  btn.className="level-button";
Â  Â  Â  Â  if(s*25>score){ btn.classList.add("locked"); btn.disabled=true;}
Â  Â  Â  Â  btn.onclick=()=> openSeason(s);
Â  Â  Â  Â  seasonsDiv.appendChild(btn);
Â  Â  }
}

function openSeason(season){
Â  Â  currentSeason=season;
Â  Â  // Ù…Ø·Ù…Ø¦Ù† Ù…ÛŒâ€ŒØ´ÙˆÛŒÙ… ØµÙØ­Ù‡ Ù…Ù†ÙˆÛŒ Ø§ØµÙ„ÛŒ Ø®Ø§Ù…ÙˆØ´ Ø´ÙˆØ¯.
Â  Â  document.getElementById("menu-screen").classList.remove("active");
Â  Â  document.getElementById("season-screen").classList.add("active");
Â  Â  // Ù‡Ù…Ú†Ù†ÛŒÙ† Ù…Ø·Ù…Ø¦Ù† Ù…ÛŒâ€ŒØ´ÙˆÛŒÙ… ØµÙØ­Ù‡ Ø¨Ø§Ø²ÛŒ Ø§Ú¯Ø± ÙØ¹Ø§Ù„ Ø¨ÙˆØ¯ØŒ Ø®Ø§Ù…ÙˆØ´ Ø´ÙˆØ¯.
Â  Â  document.getElementById("game-screen").classList.remove("active");
Â  Â  
Â  Â  document.getElementById("season-title").innerText=`Season ${season+1}`;
Â  Â  let levelsDiv=document.getElementById("levels");
Â  Â  levelsDiv.innerHTML="";
Â  Â  for(let i=0;i<25;i++){
Â  Â  Â  Â  let globalIndex=season*25+i;
Â  Â  Â  Â  let btn=document.createElement("button");
Â  Â  Â  Â  btn.className="level-button";
Â  Â  Â  Â  btn.innerText=`Level ${i+1}`;
Â  Â  Â  Â  if(globalIndex>score){ btn.classList.add("locked"); btn.disabled=true;}
Â  Â  Â  Â  btn.onclick=()=> startLevel(globalIndex);
Â  Â  Â  Â  levelsDiv.appendChild(btn);
Â  Â  }
}

function backToMenu(){
Â  Â  clearInterval(timerInterval);
Â  Â  document.getElementById("season-screen").classList.remove("active");
Â  Â  document.getElementById("game-screen").classList.remove("active");
Â  Â  document.getElementById("menu-screen").classList.add("active");
Â  Â  initMenu();
}


// Game (Ø¨Ø¯ÙˆÙ† ØªØºÛŒÛŒØ±)
function startLevel(levelIndex){
Â  Â  currentLevel=levelIndex;
Â  Â  currentEquation=levels[levelIndex];
Â  Â  document.getElementById("menu-screen").classList.remove("active");
Â  Â  document.getElementById("season-screen").classList.remove("active");
Â  Â  document.getElementById("game-screen").classList.add("active");
Â  Â  timer=60; lives=3;
Â  Â  hintUsed=false; addTimeUsed=false;
Â  Â  document.getElementById("hint-btn").classList.remove("disabled-button");
Â  Â  document.getElementById("addtime-btn").classList.remove("disabled-button");
Â  Â  updateTopBar();
Â  Â  showEquation();
Â  Â  startTimer();
}

function showEquation(){
Â  Â  document.getElementById("equation").innerHTML=currentEquation.lines.join("<br>");
}

// Timer (Ø¨Ø¯ÙˆÙ† ØªØºÛŒÛŒØ±)
function startTimer(){
Â  Â  clearInterval(timerInterval);
Â  Â  timerInterval=setInterval(()=>{
Â  Â  Â  Â  timer--;
Â  Â  Â  Â  updateTopBar();
Â  Â  Â  Â  if(timer<=0){
Â  Â  Â  Â  Â  Â  clearInterval(timerInterval);
Â  Â  Â  Â  Â  Â  gameOver(true);
Â  Â  Â  Â  }
Â  Â  },1000);
}

function updateTopBar(){
Â  Â  document.getElementById("time").innerText="â± Time: "+timer;
Â  Â  document.getElementById("lives").innerText="â¤ï¸".repeat(lives);
Â  Â  document.getElementById("score").innerText="â­ Score: "+score;
Â  Â  document.getElementById("level-num").innerText="ğŸ“ˆ Level: "+(currentLevel+1);
}

// *** ØªØ§Ø¨Ø¹ Ø¬Ø¯ÛŒØ¯ Ø¨Ø±Ø§ÛŒ Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ Ù…Ù†ÙˆÛŒ Ù…Ø±Ø§Ø­Ù„ (ØªÙ†Ù‡Ø§ Ø¨Ø±Ø§ÛŒ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø¨Ø¹Ø¯ Ø§Ø² Ù¾Ø§Ø³Ø® ØµØ­ÛŒØ­) ***
function goToSeasonMenu(){
Â  Â  // 1. ØªÙˆÙ‚Ù Ø²Ù…Ø§Ù†â€ŒØ³Ù†Ø¬
Â  Â  clearInterval(timerInterval); 
Â  Â  
Â  Â  // 2. ØªØºÛŒÛŒØ± ØµÙØ­Ù‡: Ø¨Ø§Ø²ÛŒ -> Ù…Ù†ÙˆÛŒ Ù…Ø±Ø§Ø­Ù„
Â  Â  document.getElementById("game-screen").classList.remove("active");
Â  Â  document.getElementById("season-screen").classList.add("active");
Â  Â  
Â  Â  // 3. Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ù„ÛŒØ³Øª Ù…Ø±Ø§Ø­Ù„ (Ø¨Ø±Ø§ÛŒ Ø¨Ø§Ø² Ø´Ø¯Ù† Ù…Ø±Ø­Ù„Ù‡ Ø¨Ø¹Ø¯ÛŒ)
Â  Â  openSeason(currentSeason);
}
// *** Ù¾Ø§ÛŒØ§Ù† ØªØ§Ø¨Ø¹ Ø¬Ø¯ÛŒØ¯ ***


// Answer check (Ø§ØµÙ„Ø§Ø­ Ù†Ù‡Ø§ÛŒÛŒ Ø¨Ø±Ø§ÛŒ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² ØªØ§Ø¨Ø¹ Ø¬Ø¯ÛŒØ¯)
function checkAnswer(){
Â  Â  let user=Number(document.getElementById("answer").value);
Â  Â  document.getElementById("answer").value='';
Â  Â  
Â  Â  if(user===currentEquation.answer){
Â  Â  Â  Â  score++;
Â  Â  Â  Â  updateTopBar();
Â  Â  Â  Â  playCorrect();
Â  Â  Â  Â  showParticles("ğŸ‰");
Â  Â  Â  Â  
Â  Â  Â  Â  setTimeout(()=> { 
Â  Â  Â  Â  Â  Â  alert("ğŸ‰ Correct!");
Â  Â  Â  Â  Â  Â  // Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² ØªØ§Ø¨Ø¹ Ø¬Ø¯ÛŒØ¯ Ú©Ù‡ Ù…Ø³ØªÙ‚ÛŒÙ…Ø§Ù‹ Ø¨Ù‡ ØµÙØ­Ù‡ Ù…Ø±Ø§Ø­Ù„ Ø¨Ø±Ù…ÛŒâ€ŒÚ¯Ø±Ø¯Ø¯
Â  Â  Â  Â  Â  Â  goToSeasonMenu(); 
Â  Â  Â  Â  }, 500);
Â  Â  Â  Â  
Â  Â  } else{
Â  Â  Â  Â  lives--;
Â  Â  Â  Â  updateTopBar();
Â  Â  Â  Â  playWrong();
Â  Â  Â  Â  showParticles("âŒ");
Â  Â  Â  Â  
Â  Â  Â  Â  clearInterval(timerInterval); // ØªÙˆÙ‚Ù Ù…ÙˆÙ‚Øª Ø¨Ø±Ø§ÛŒ Ù†Ù…Ø§ÛŒØ´ Alert
Â  Â  Â  Â  
Â  Â  Â  Â  if(lives<=0) gameOver(false);
Â  Â  Â  Â  else {
Â  Â  Â  Â  Â  Â  alert("âŒ Wrong answer. Lives left: "+lives);
Â  Â  Â  Â  Â  Â  startTimer(); // Ø§Ø¯Ø§Ù…Ù‡ Ø²Ù…Ø§Ù†â€ŒØ³Ù†Ø¬
Â  Â  Â  Â  }
Â  Â  }
}

// Game Over (Ø¨Ø¯ÙˆÙ† ØªØºÛŒÛŒØ±)
function gameOver(isTimeOut){
Â  Â  playGameOver();
Â  Â  showParticles("ğŸ’€");
Â  Â  clearInterval(timerInterval);
Â  Â  setTimeout(()=> {
Â  Â  Â  Â  alert(isTimeOut?"ğŸ’€ Time's up!":"ğŸ’€ No lives left!");
Â  Â  Â  Â  backToMenu();
Â  Â  }, 500);
}

// Hint and AddTime (Ø¨Ø¯ÙˆÙ† ØªØºÛŒÛŒØ±)
function simulateAd(callback){
Â  Â  alert("ğŸ¬ Watch ad to unlock feature...");
Â  Â  setTimeout(callback,500); // simulate ad
}

function useHint(){
Â  Â  if(hintUsed) return;
Â  Â  simulateAd(()=>{
Â  Â  Â  Â  const fruitsInEquation=Object.keys(currentEquation.fruitValues);
Â  Â  Â  Â  const randomFruit=fruitsInEquation[Math.floor(Math.random()*fruitsInEquation.length)];
Â  Â  Â  Â  const value=currentEquation.fruitValues[randomFruit];
Â  Â  Â  Â  alert(`ğŸ’¡ Hint: ${randomFruit} = ${value}`);
Â  Â  Â  Â  hintUsed=true;
Â  Â  Â  Â  document.getElementById("hint-btn").classList.add("disabled-button");
Â  Â  });
}

function useAddTime(){
Â  Â  if(addTimeUsed) return;
Â  Â  simulateAd(()=>{
Â  Â  Â  Â  timer+=600;
Â  Â  Â  Â  updateTopBar();
Â  Â  Â  Â  addTimeUsed=true;
Â  Â  Â  Â  document.getElementById("addtime-btn").classList.add("disabled-button");
Â  Â  });
}

// Particles (Ø¨Ø¯ÙˆÙ† ØªØºÛŒÛŒØ±)
function showParticles(icon){
Â  Â  for(let i=0;i<40;i++){
Â  Â  Â  Â  const particle=document.createElement("div");
Â  Â  Â  Â  particle.className="particle";
Â  Â  Â  Â  particle.innerText=icon;
Â  Â  Â  Â  particle.style.left=(Math.random()*80 +10)+"%";
Â  Â  Â  Â  particle.style.top="80%";
Â  Â  Â  Â  particle.style.fontSize=(Math.random()*24 +16)+"px";
Â  Â  Â  Â  document.body.appendChild(particle);
Â  Â  Â  Â  setTimeout(()=> particle.remove(),4000);
Â  Â  }
}

// Sounds (Ø¨Ø¯ÙˆÙ† ØªØºÛŒÛŒØ±)
function playCorrect(){
Â  Â  const audio=document.getElementById("correct-sound");
Â  Â  audio.currentTime=0;
Â  Â  audio.play().catch(e=>console.log(e));
}
function playWrong(){
Â  Â  const audio=document.getElementById("wrong-sound");
Â  Â  audio.currentTime=0;
Â  Â  audio.play().catch(e=>console.log(e));
}
function playGameOver(){
Â  Â  const audio=document.getElementById("gameover-sound");
Â  Â  audio.currentTime=0;
Â  Â  audio.play().catch(e=>console.log(e));
}

// Init (Ø¨Ø¯ÙˆÙ† ØªØºÛŒÛŒØ±)
initMenu();
</script>
</body>
</html>
