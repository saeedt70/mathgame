<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ø¨Ø§Ø²ÛŒ ØªÙ…Ø±ÛŒÙ† Ø±ÛŒØ§Ø¶ÛŒ</title>
<style>
:root {
  --scale: 1.25; /* ğŸ‘ˆ Ø§ÛŒÙ† Ø¹Ø¯Ø¯ Ø§Ù†Ø¯Ø§Ø²Ù‡ Ú©Ù„ Ø¹Ù†Ø§ØµØ± Ø±Ùˆ Ú©Ù†ØªØ±Ù„ Ù…ÛŒâ€ŒÚ©Ù†Ù‡ */
}

body {
  font-family: Arial, sans-serif;
  background: linear-gradient(135deg, #3b82f6, #9333ea);
  margin: 0;
  padding: 0;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  height: 100vh;
  font-size: calc(16px * var(--scale));
  color: white;
  overflow: hidden;
}

#top-bar {
  width: 90%;
  background: #ffffff20;
  color: white;
  font-size: calc(18px * var(--scale));
  font-weight: bold;
  text-align: center;
  padding: calc(12px * var(--scale)) 0;
  border-radius: calc(8px * var(--scale));
  margin-bottom: calc(20px * var(--scale));
}

#level-select {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  gap: calc(10px * var(--scale));
}

.level-button {
  margin: calc(6px * var(--scale));
  padding: calc(12px * var(--scale)) calc(18px * var(--scale));
  font-size: calc(18px * var(--scale));
  border-radius: calc(8px * var(--scale));
  border: none;
  cursor: pointer;
  background-color: #fff;
  transition: transform 0.2s, background 0.3s;
  color: #333;
}
.level-button:hover {
  transform: scale(1.05);
  background-color: #e0e0e0;
}

#game {
  display: none;
  flex-direction: column;
  align-items: center;
  gap: calc(15px * var(--scale));
}

#equation {
  font-size: calc(28px * var(--scale));
  padding: calc(20px * var(--scale));
  border-radius: calc(12px * var(--scale));
  background: #fff;
  color: #333;
  text-align: center;
}

#answers {
  display: flex;
  justify-content: center;
  align-items: center;
  gap: calc(10px * var(--scale));
}

#answers input {
  font-size: calc(24px * var(--scale));
  width: calc(120px * var(--scale));
  padding: calc(10px * var(--scale));
  border-radius: calc(8px * var(--scale));
  text-align: center;
  border: 2px solid #3b82f6;
  outline: none;
  direction: ltr;
}
#answers input:focus {
  border-color: #9333ea;
}

#answers button {
  font-size: calc(24px * var(--scale));
  padding: calc(10px * var(--scale)) calc(20px * var(--scale));
  border-radius: calc(8px * var(--scale));
  border: none;
  cursor: pointer;
  background-color: #3b82f6;
  color: white;
  transition: background 0.3s;
}
#answers button:hover {
  background-color: #2563eb;
}

#hints {
  display: flex;
  gap: calc(15px * var(--scale));
  margin-top: calc(10px * var(--scale));
}

#hints button {
  padding: calc(10px * var(--scale)) calc(25px * var(--scale));
  font-size: calc(18px * var(--scale));
  border-radius: calc(8px * var(--scale));
  background-color: #9333ea;
  color: white;
  border: none;
  cursor: pointer;
  transition: background 0.3s;
}
#hints button:hover {
  background-color: #7e22ce;
}

#message {
  font-size: calc(20px * var(--scale));
  margin-top: calc(10px * var(--scale));
  font-weight: bold;
}

.particle {
  position: absolute;
  font-size: calc(24px * var(--scale));
  animation: float 1s ease-out forwards;
}

@keyframes float {
  0% { transform: translateY(0); opacity: 1; }
  100% { transform: translateY(-100px); opacity: 0; }
}
</style>
</head>

<body>
  <div id="top-bar">ğŸ¯ Ø§Ù†ØªØ®Ø§Ø¨ Ù…Ø±Ø­Ù„Ù‡ ØªÙ…Ø±ÛŒÙ† Ø±ÛŒØ§Ø¶ÛŒ</div>
  
  <div id="level-select">
    <button class="level-button" data-level="1">Ù…Ø±Ø­Ù„Ù‡ Û±</button>
    <button class="level-button" data-level="2">Ù…Ø±Ø­Ù„Ù‡ Û²</button>
    <button class="level-button" data-level="3">Ù…Ø±Ø­Ù„Ù‡ Û³</button>
    <button class="level-button" data-level="4">Ù…Ø±Ø­Ù„Ù‡ Û´</button>
  </div>

  <div id="game">
    <div id="equation"></div>
    <div id="answers">
      <input id="answer" type="text" inputmode="numeric" pattern="-?[0-9]*" placeholder="Ù¾Ø§Ø³Ø®">
      <button id="check">Ø¨Ø±Ø±Ø³ÛŒ</button>
    </div>
    <div id="hints">
      <button id="hint">Ø±Ø§Ù‡Ù†Ù…Ø§ÛŒÛŒ</button>
      <button id="add-time">Ø²Ù…Ø§Ù† Ø¨ÛŒØ´ØªØ± â°</button>
    </div>
    <div id="message"></div>
  </div>

<script>
const levels = {
  1: { min: 1, max: 10 },
  2: { min: 10, max: 50 },
  3: { min: 50, max: 100 },
  4: { min: -50, max: 100 }
};

let currentLevel = 1;
let correctAnswer = 0;

document.querySelectorAll('.level-button').forEach(btn => {
  btn.addEventListener('click', () => {
    currentLevel = btn.dataset.level;
    document.getElementById('level-select').style.display = 'none';
    document.getElementById('top-bar').textContent = `Ù…Ø±Ø­Ù„Ù‡ ${currentLevel}`;
    document.getElementById('game').style.display = 'flex';
    newEquation();
  });
});

function newEquation() {
  const { min, max } = levels[currentLevel];
  const a = Math.floor(Math.random() * (max - min)) + min;
  const b = Math.floor(Math.random() * (max - min)) + min;
  const ops = ['+', '-', 'Ã—'];
  const op = ops[Math.floor(Math.random() * ops.length)];
  correctAnswer = op === '+' ? a + b : op === '-' ? a - b : a * b;
  document.getElementById('equation').textContent = `${a} ${op} ${b} = ?`;
  document.getElementById('answer').value = '';
  document.getElementById('message').textContent = '';
}

document.getElementById('check').addEventListener('click', () => {
  const answer = parseFloat(document.getElementById('answer').value);
  const msg = document.getElementById('message');
  if (isNaN(answer)) {
    msg.textContent = 'Ù„Ø·ÙØ§Ù‹ Ø¹Ø¯Ø¯ ÙˆØ§Ø±Ø¯ Ú©Ù†!';
    msg.style.color = 'yellow';
  } else if (answer === correctAnswer) {
    msg.textContent = 'Ø¢ÙØ±ÛŒÙ†! Ø¯Ø±Ø³Øª Ú¯ÙØªÛŒ ğŸ‰';
    msg.style.color = 'lime';
    createParticles();
    setTimeout(newEquation, 1000);
  } else {
    msg.textContent = 'Ø§Ø´ØªØ¨Ø§Ù‡ Ø´Ø¯ ğŸ˜… Ø¯ÙˆØ¨Ø§Ø±Ù‡ ØªÙ„Ø§Ø´ Ú©Ù†!';
    msg.style.color = 'red';
  }
});

document.getElementById('hint').addEventListener('click', () => {
  const msg = document.getElementById('message');
  msg.textContent = `ğŸ‘€ Ø¬ÙˆØ§Ø¨ Ø¨ÛŒÙ† ${correctAnswer - 3} ØªØ§ ${correctAnswer + 3} Ù‡Ø³Øª`;
  msg.style.color = 'orange';
});

document.getElementById('add-time').addEventListener('click', () => {
  alert('â° Ø²Ù…Ø§Ù† Ø§Ø¶Ø§ÙÙ‡ Ø´Ø¯ (Ø¯Ø± Ù†Ø³Ø®Ù‡â€ŒÙ‡Ø§ÛŒ Ø¨Ø¹Ø¯ÛŒ ÙØ¹Ø§Ù„ Ù…ÛŒâ€ŒØ´ÙˆØ¯)');
});

function createParticles() {
  for (let i = 0; i < 10; i++) {
    const p = document.createElement('div');
    p.textContent = ['âœ¨', 'ğŸˆ', 'ğŸ’«', 'â­'][Math.floor(Math.random() * 4)];
    p.className = 'particle';
    p.style.left = Math.random() * 100 + 'vw';
    p.style.top = '50vh';
    document.body.appendChild(p);
    setTimeout(() => p.remove(), 1000);
  }
}
</script>
</body>
</html>
